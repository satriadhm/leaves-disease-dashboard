<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Deteksi penyakit tanaman dengan AI yang akurat. Analisis cabai, jagung, padi, dan tomat menggunakan teknologi machine learning terdepan." />
    <meta name="keywords" content="plant disease, AI, machine learning, agriculture, tanaman, penyakit, deteksi, pertanian" />
    <meta name="author" content="Plant Disease Detection Team" />
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Plant Disease Detection - Deteksi Penyakit Tanaman dengan AI" />
    <meta property="og:description" content="Platform deteksi penyakit tanaman menggunakan kecerdasan buatan untuk cabai, jagung, padi, dan tomat" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://plant-disease-detection.vercel.app" />
    <meta property="og:image" content="https://plant-disease-detection.vercel.app/og-image.png" />
    <meta property="og:site_name" content="Plant Disease Detection" />
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Plant Disease Detection - AI untuk Pertanian" />
    <meta name="twitter:description" content="Deteksi penyakit tanaman dengan akurasi tinggi menggunakan AI" />
    <meta name="twitter:image" content="https://plant-disease-detection.vercel.app/twitter-image.png" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    
    <!-- Preload critical resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    
    <!-- Theme color for mobile browsers -->
    <meta name="theme-color" content="#2563eb" />
    <meta name="msapplication-TileColor" content="#2563eb" />
    
    <!-- PWA related meta tags -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Plant Disease Detection" />
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Plant Disease Detection",
      "description": "AI-powered plant disease detection for agriculture",
      "url": "https://plant-disease-detection.vercel.app",
      "applicationCategory": "Agriculture",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "author": {
        "@type": "Organization",
        "name": "Plant Disease Detection Team"
      }
    }
    </script>
    
    <title>Plant Disease Detection - Deteksi Penyakit Tanaman dengan AI</title>
    
    <!-- Critical CSS will be injected here by webpack -->
    <style>
        /* Critical CSS for initial load */
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f9fafb;
            color: #1f2937;
        }
        
        .loading-screen {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease-out;
        }
        
        .loading-content {
            text-align: center;
            color: white;
        }
        
        .loading-logo {
            font-size: 4rem;
            margin-bottom: 1rem;
            animation: bounce 1s infinite;
        }
        
        .loading-text {
            font-size: 1.25rem;
            font-weight: 500;
            margin-bottom: 2rem;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-screen.fade-out {
            opacity: 0;
            pointer-events: none;
        }
        
        #app {
            min-height: 100vh;
            opacity: 0;
            transition: opacity 0.5s ease-in;
        }
        
        #app.loaded {
            opacity: 1;
        }
        
        /* Prevent FOUC (Flash of Unstyled Content) */
        .no-js #app {
            display: none;
        }
        
        .no-js .loading-screen {
            display: none;
        }
        
        .no-js .fallback-content {
            display: block;
            padding: 2rem;
            text-align: center;
            max-width: 600px;
            margin: 2rem auto;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .fallback-content {
            display: none;
        }
    </style>
</head>
<body class="no-js">
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="loading-logo">üå±</div>
            <div class="loading-text">Plant Disease Detection</div>
            <div class="loading-spinner"></div>
        </div>
    </div>
    
    <!-- Main App Container -->
    <div id="app">
        <!-- App content will be rendered here -->
    </div>
    
    <!-- Fallback content for users with JavaScript disabled -->
    <div class="fallback-content">
        <h1>üå± Plant Disease Detection</h1>
        <p>
            Maaf, aplikasi ini memerlukan JavaScript untuk berfungsi dengan baik. 
            Silakan aktifkan JavaScript di browser Anda dan refresh halaman ini.
        </p>
        <p>
            <strong>Browser yang didukung:</strong><br>
            Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
        </p>
        <p>
            <a href="https://github.com/satriadhm/leaves-disease-dashboard" target="_blank" rel="noopener">
                üì± Kunjungi repository GitHub untuk informasi lebih lanjut
            </a>
        </p>
    </div>
    
    <!-- Environment Variables (will be replaced by webpack) -->
    <script>
        window.ENV = {
            API_URL: '<%= htmlWebpackPlugin.options.env?.API_URL || "https://leaves-disease-api.vercel.app" %>',
            NODE_ENV: '<%= htmlWebpackPlugin.options.env?.NODE_ENV || "production" %>',
            VERSION: '<%= htmlWebpackPlugin.options.env?.VERSION || "2.0.0" %>'
        };
    </script>
    
    <!-- Enable JavaScript -->
    <script>
        // Remove no-js class immediately
        document.body.classList.remove('no-js');
        
        // Basic feature detection
        if (!window.fetch || !window.Promise || !window.URLSearchParams) {
            document.body.innerHTML = `
                <div style="padding: 2rem; text-align: center; font-family: Arial, sans-serif;">
                    <h2>Browser Tidak Didukung</h2>
                    <p>Browser Anda terlalu lama untuk menjalankan aplikasi ini.</p>
                    <p>Silakan update browser Anda atau gunakan browser modern seperti:</p>
                    <ul style="display: inline-block; text-align: left;">
                        <li>Google Chrome (versi terbaru)</li>
                        <li>Mozilla Firefox (versi terbaru)</li>
                        <li>Safari (versi terbaru)</li>
                        <li>Microsoft Edge (versi terbaru)</li>
                    </ul>
                </div>
            `;
        }
        
        // Hide loading screen after app loads
        window.addEventListener('load', function() {
            setTimeout(function() {
                const loadingScreen = document.getElementById('loadingScreen');
                const app = document.getElementById('app');
                
                if (loadingScreen) {
                    loadingScreen.classList.add('fade-out');
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                    }, 500);
                }
                
                if (app) {
                    app.classList.add('loaded');
                }
            }, 1000); // Minimum loading time for UX
        });
        
        // Global error handler
        window.addEventListener('error', function(e) {
            console.error('Global error:', e.error);
            
            // Hide loading screen on error
            const loadingScreen = document.getElementById('loadingScreen');
            if (loadingScreen) {
                loadingScreen.style.display = 'none';
            }
            
            // Show error message
            const app = document.getElementById('app');
            if (app && !app.innerHTML.trim()) {
                app.innerHTML = `
                    <div style="padding: 2rem; text-align: center; font-family: Arial, sans-serif;">
                        <h2>‚ùå Terjadi Kesalahan</h2>
                        <p>Maaf, terjadi kesalahan saat memuat aplikasi.</p>
                        <button onclick="window.location.reload()" style="
                            padding: 1rem 2rem; 
                            background: #2563eb; 
                            color: white; 
                            border: none; 
                            border-radius: 0.5rem; 
                            cursor: pointer;
                            font-size: 1rem;
                        ">
                            üîÑ Coba Lagi
                        </button>
                    </div>
                `;
            }
        });
        
        // Service Worker registration (for future PWA features)
        if ('serviceWorker' in navigator && window.location.protocol === 'https:') {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('SW registered: ', registration);
                    })
                    .catch(function(registrationError) {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
        
        // Analytics placeholder (Google Analytics, etc.)
        // gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    
    <!-- Webpack will inject the bundled JavaScript here -->
</body>
</html>